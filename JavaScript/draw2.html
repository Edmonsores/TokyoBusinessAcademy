<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>お絵かきソフト 1 </title>
<style>
canvas {
border:solid #999999 1px;
}
</style>
</head>
<body>
<canvas id="main" width="640" height="480">
</canvas>
<div class="pallet">
<canvas id="canvasColor" width="20" height="20"></canvas>
ペンの色: [<span id="textColor">R:0,G:0,B:0,A:1.0</span>]<br>
R:<input type="range" id="penR" value="0" min="0" max="255"><br>
G:<input type="range" id="penG" value="0" min="0" max="255"><br>
B:<input type="range" id="penB" value="0" min="0" max="255"><br>
A:<input type="range" id="penA" value="1" min="0" max="1" step="0.1">
<hr>
</div>
<script>
// マウスが押されたとき
document.getElementById('main').addEventListener('mousedown', function(){
startDraw(event);
});
//マウスが動いた時
document.getElementById('main').addEventListener('mousemove', function(){
draw(event);
});
//マウスが離れた時
document.getElementById('main').addEventListener('mouseup', function(){
endDraw(event);
});
//赤ペン色のレンジに変更があったら
document.getElementById('penR').addEventListener('change', function(){
changeColor();
});
//緑ベン色のレンジに変更があったら
document.getElementById('penG').addEventListener('change', function(){
changeColor();
});
//青ペン色のレンジに変更があったら
document.getElementById('penB').addEventListener('change', function(){
changeColor();
});
//透明のレンジに変更があったら
document.getElementById('penA').addEventListener('change', function(){
changeColor();
});
// マウスボタンが押されているかどうかを調べる変数を宣言
let mouseDown = false;
let penX = 0;// ペンの設定ヨコ位置
let penY = 0;// ペンの設定タテ位置
let penColor = "rgba(0,0,0,1)"; // ペンの色
let penWidth = 10;// ペンの太さ
function startDraw(event) { // 描画の開始
// マウスボタンが押された
mouseDown = true;
// ペンの座標をセット
penX = event.clientX;
penY = event.clientY;
}
// 描画
function draw(event) {
if (mouseDown) { // マウスボタンが押されていれば描画
// キャンバスの取得
let canvas = document.getElementById("main");
let context = canvas.getContext("2d");
context.strokeStyle = penColor; // ペンのセット
context.lineWidth = penWidth;
context.lineCap = "round";
let x = event.clientX; // マウスカーソルの座標を取得
let y = event.clientY;
context.beginPath(); // バスの開始
context.moveTo (penX, penY);// 座標の移動
// コンテキストの取得
context.lineTo(x,y); // 線の描画
context.stroke(); // バスの描画
penX = x; // ペン座標の切り替え
penY = y;
}
}
function endDraw(event) {// 描画の終了
mouseDown = false; // マウスボタンが離れた
}
function changeColor() { // スライダーの値を取得
let penR = document.getElementById("penR").value;
let penG = document.getElementById("penG").value;
let penB = document.getElementById("penB").value;
let penA = document.getElementById("penA").value;
// ペンの色をセット
penColor = "rgba("+penR+", "+penG+", "+penB+", "+penA+")";
let canvasColor = document.getElementById("canvasColor"); // ペンの色用
// コンテキストの取得
let contextColor = canvasColor.getContext("2d");
// ペンの色を塗りつぶしの四角形で表示
contextColor.clearRect(0,0,20,20);
contextColor.fillStyle = penColor;
contextColor.fillRect(0,0,20,20);
// ペンの色をテキストで表示
let textColor = document.getElementById("textColor");
textColor.innerHTML = "R:"+penR+", G: "+penG+", B: "+penB+", A: "+penA;
}
</script>
</body>
</html>